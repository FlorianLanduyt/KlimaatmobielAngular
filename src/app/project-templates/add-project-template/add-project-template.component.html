<mat-card>
    <mat-card-title>Projectenconcept toevoegen</mat-card-title>
    <mat-card-content>
      <form [formGroup]="projecttemplate" (ngSubmit)="onSubmit()">
          <div class="vertical">
        <mat-form-field>
          <input
            matInput
            aria-label="Naam"
            placeholder="Naam van het project"
            type="text"
            formControlName="name"
            data-cy="newprojecttemplatename"
            required
          />
          <mat-error
            *ngIf="projecttemplate.get('name')?.errors && projecttemplate.get('name')?.touched"
            data-cy="newprojecttemplatenameerror"
          >
            {{ getErrorMessage(projecttemplate.get('name').errors) }}
          </mat-error>
        </mat-form-field>
        <mat-form-field>
            <input
              matInput
              aria-label="Beschrijving"
              placeholder="Beschrijving van het project"
              type="text"
              formControlName="descr"
              data-cy="newprojecttemplatedescription"
              required
            />
            <mat-error
              *ngIf="projecttemplate.get('descr')?.errors && projecttemplate.get('descr')?.touched"
              data-cy="newprojecttemplatedescriptionerror"
            >
              {{ getErrorMessage(projecttemplate.get('descr').errors) }}
            </mat-error>
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              aria-label="Afbeelding"
              placeholder="Link naar de afbeelding"
              type="text"
              formControlName="image"
              data-cy="newprojecttemplateimage"
              required
              #foto
            />
            <mat-error
              *ngIf="projecttemplate.get('image')?.errors && projecttemplate.get('image')?.touched"
              data-cy="newprojecttemplateimageerror"
            >
              {{ getErrorMessage(projecttemplate.get('image').errors) }}
            </mat-error>
          </mat-form-field>
          


          <mat-form-field>
            <mat-label>Onderwerp</mat-label>
            <mat-select formControlName="applicationDomain" required>
              <mat-option *ngFor="let domein of domains" [value]="domein.id">
                {{domein.name}}
              </mat-option>
            </mat-select>
            
            <mat-error
              *ngIf="projecttemplate.get('image')?.errors && projecttemplate.get('image')?.touched"
            >
              {{ getErrorMessage(projecttemplate.get('image').errors) }}
            </mat-error>
          </mat-form-field>
        
          <mat-form-field>
            <mat-label>Productconcepten</mat-label>
            <mat-select formControlName="productTemplates" multiple required>
              <mat-option >-- None --</mat-option>
              <mat-option  *ngFor="let group of productTemplates" [value]="group">
                  {{group.productName}}
                </mat-option>
            </mat-select>
          </mat-form-field>



        <button type="submit" mat-raised-button [disabled]="!projecttemplate.valid" data-cy="newprojecttemplatesubmit">
          Toevoegen
        </button>
        </div>
      </form>
      
      <img *ngIf="projecttemplate.get('image')?.touched" src="{{foto.value}}">
    </mat-card-content>
  </mat-card>
